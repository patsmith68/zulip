{% extends "zerver/emails/email_base_messages.html" %}

{% block preheader %}
    {% for recipient_block in messages %}
        {% for sender_block in recipient_block.senders %}
            {% for message_block in sender_block.content %}
            {{ message_block.html|safe }}
            {% endfor %}
        {% endfor %}
    {% endfor %}
{% endblock %}

{% block content %}
    {% if show_message_content %}
        {% for recipient_block in messages %}
            {% for sender_block in recipient_block.senders %}
                <div class="missed_message">
                    {% if sender_block.sender %}<div class="missed_message_sender">{{ sender_block.sender }}</div>{% endif %}
                    {% for message_block in sender_block.content %}
                        {{ message_block.html|safe }}
                    {% endfor %}
                </div>
            {% endfor %}
        {% endfor %}
    {% endif %}
{% endblock %}

{% block manage_preferences %}

<div class="email-preferences">
    &mdash;<br>
    <a href="{{ realm_uri }}/#settings/notifications">Manage email preferences</a> | <a href="{{ unsubscribe_link }}">Unsubscribe</a> from missed message emails.<br>
    {% if reply_to_zulip %}
        Reply to this email directly, or <a href="{{ realm_uri }}">view it in Zulip</a>.<br>
    {% else %}
        <a href="{{ realm_uri }}">Reply in Zulip</a>.<br>
    {% endif %}
    {% if reply_warning %}
        Please do not reply to this automated message. To respond to the missed messages you have received, please log on to Zulip and send your replies there.
    {% endif %}
</div>
{% endblock %}
